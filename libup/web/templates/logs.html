{% extends "base.html" %}
{% block subtitle %}{{repo}}{% endblock %}
{% block main %}
<h1>{{repo}}</h1>
<a href="https://gerrit.wikimedia.org/g/{{repo}}">source</a> • <a href="https://gerrit.wikimedia.org/r/q/project:{{repo}}">patches</a>
{% if patch %}
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#patch" aria-expanded="false" aria-controls="patch">
  View proposed patch
</button>
<div class="collapse" id="patch">
    <pre>{{patch}}</pre>
</div>
{% endif %}
{% if log %}
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#logtext" aria-expanded="false" aria-controls="logtext">
  {% if success %}View log file{% else %}View error log{% endif %}
</button>
<div class="collapse" id="logtext">
    <pre>{{log}}</pre>
</div>
{% endif %}
{% for manager, info in deps.items()|sort %}
{% if info %}
<h3>{{manager}} dependencies</h3>
{% if info.deps %}
<h5>Dependencies</h5>
<ul>
    {% for library in info.deps|sort %}
    <li>
        <a href="{{url_for('library_', manager=manager, name=library.name)}}"><code>{{library.name}}</code></a>: <code>{{library.version}}</code>
        {% if library.is_newer() %}(<code>{{library.latest_version()}}</code> available{% if library.is_latest_safe() %}✔️{% endif %}){% endif %}
    </li>
    {% endfor %}
</ul>
{% endif %}
{% if info.dev %}
<h5>Development dependencies</h5>
<ul>
    {% for library in info.dev|sort %}
    <li>
        <a href="{{url_for('library_', manager=manager, name=library.name)}}"><code>{{library.name}}</code></a>: <code>{{library.version}}</code>
        {% if library.is_newer() %}(<code>{{library.latest_version()}}</code> available{% if library.is_latest_safe() %}✔️{% endif %}){% endif %}
    </li>
    {% endfor %}
</ul>
{% endif %}
{% endif %}
{% endfor %}
{% if logs %}
<h3>Logs</h3>
<ul>
{% for log in logs %}
<li>{{log}}</li>
{% endfor %}
</ul>
{% endif %}
{% endblock %}
